{% load static %}
{% load table_tags %}

<div class="bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
    <table class="min-w-full divide-y divide-gray-300" id="employee-table">
        <thead>
            <tr>
                {% for column in columns %}
                <th scope="col" 
                    data-column="{{ column.id }}" 
                    class="py-3.5 {% if forloop.first %}pl-4 pr-3{% else %}px-3{% endif %} text-left text-sm font-semibold text-gray-900">
                    {{ column.label }}
                </th>
                {% endfor %}
                {% if table_config.update_url_name %}
                <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6 actions-column">
                    <span class="sr-only">Actions</span>
                </th>
                {% endif %}
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
            {% for item in items %}
            <tr>
                {% for column in columns %}
                <td data-column="{{ column.id }}" 
                    class="whitespace-nowrap {% if forloop.first %}py-4 pl-4 pr-3{% else %}px-3 py-4{% endif %} text-sm {% if column.clickable %}font-medium text-gray-900{% else %}text-gray-500{% endif %}">
                    {% if column.clickable and column.url_name %}
                        <a href="{% url column.url_name item.pk %}" class="text-indigo-600 hover:text-indigo-900">
                            {{ item|getattr_filter:column.value }}
                        </a>
                    {% elif column.id == 'status' %}
                        <span class="inline-flex rounded-full px-2 text-xs font-semibold leading-5 
                            {% if item.employee_status == 'active' %}bg-green-100 text-green-800
                            {% elif item.employee_status == 'on_leave' %}bg-yellow-100 text-yellow-800
                            {% else %}bg-red-100 text-red-800{% endif %}">
                            {{ item|getattr_filter:column.value }}
                        </span>
                    {% else %}
                        {{ item|getattr_filter:column.value }}
                    {% endif %}
                </td>
                {% endfor %}
                {% if table_config.update_url_name %}
                <td class="relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6">
                    <a href="{% url table_config.update_url_name item.id %}" class="text-indigo-600 hover:text-indigo-900 mr-4">Edit</a>
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr class="empty-row">
                <td colspan="{{ columns|length|add:1 }}" class="px-3 py-4 text-sm text-gray-500 text-center">
                    {{ empty_message }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Required CSS and JS -->
<link rel="stylesheet" href="{% static 'components/css/data_table.css' %}">
<script src="{% static 'components/js/data_table.js' %}"></script>
