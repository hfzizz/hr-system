{% extends "base.html" %}

{% block title %}Appraisal Wizard - Section B{% endblock %}

{% block content %}
<!-- Appraisal Wizard Section B -->
<div class="max-w-5xl mx-auto bg-white shadow-md rounded-lg p-6 mb-8">
    <h2 class="text-2xl font-bold text-gray-800 mb-2">Section B: Appraisal of General Traits</h2>
    <p class="text-sm text-gray-600 mb-6 pb-2 border-b border-gray-200">
        <span class="font-medium">Rating Scale:</span> 
        1 - Outstanding, 2 - Good, 3 - Satisfactory, 4 - Unsatisfactory
    </p>

        <!-- B1. General Traits -->
        <div class="mb-8  bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-100">
            <h3 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200"">B1. General Traits</h3>
            
            <div class="mb-6">
                <label class="block text-gray-700 mb-2">Effective work output</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b1_effective_work" id="b1_effective_work_1" value="1" required
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b1_effective_work", "section": "B1", "value": "1", "appraisal_id": "{{ appraisal.appraisal_id }}" }'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-2 text-gray-700" for="b1_effective_work_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b1_effective_work" id="b1_effective_work_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b1_effective_work", "section": "B1", "value": "2", "appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-2 text-gray-700" for="b1_effective_work_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b1_effective_work" id="b1_effective_work_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b1_effective_work", "section": "B1", "value": "3", "appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-2 text-gray-700" for="b1_effective_work_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b1_effective_work" id="b1_effective_work_4" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change" 
                            hx-vals='{"field": "b1_effective_work", "section": "B1", "value": "4", "appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-2 text-gray-700" for="b1_effective_work_4">4</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">Reliability in carrying out duties</label>
                <div class="flex items-center gap-4">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_reliability" id="b1_reliability_1" value="1" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_reliability", "section": "B1", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_reliability_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_reliability" id="b1_reliability_2" value="2"
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_reliability", "section": "B1", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_reliability_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_reliability" id="b1_reliability_3" value="3"
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_reliability", "section": "B1", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_reliability_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_reliability" id="b1_reliability_4" value="4"
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_reliability", "section": "B1", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_reliability_4">4</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">Punctuality at lectures, tutorials, practicals/lab sessions, meetings</label>
                <div class="flex items-center gap-4">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_punctuality" id="b1_punctuality_1" value="1" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_punctuality", "section": "B1", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_punctuality_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_punctuality" id="b1_punctuality_2" value="2" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_punctuality", "section": "B1", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_punctuality_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_punctuality" id="b1_punctuality_3" value="3" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_punctuality", "section": "B1", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_punctuality_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_punctuality" id="b1_punctuality_4" value="4" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_punctuality", "section": "B1", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_punctuality_4">4</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">Organisation of practicals, tutorials and field work, etc</label>
                <div class="flex items-center gap-4">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_organisation" id="b1_organisation_1" value="1" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_organisation", "section": "B1", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_organisation_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_organisation" id="b1_organisation_2" value="2" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_organisation", "section": "B1", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_organisation_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_organisation" id="b1_organisation_3" value="3" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_organisation", "section": "B1", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_organisation_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                               type="radio" name="b1_organisation" id="b1_organisation_4" value="4" required
                               hx-post="{% url 'appraisals:save_rating' %}"
                               hx-trigger="change"
                               hx-vals='{"field": "b1_organisation", "section": "B1", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                               hx-swap="none"
                               hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b1_organisation_4">4</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- B2. Inter-personal Relations -->
        <div class="mb-8 bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-100">
            <h3 class="text-xl font-semibold text-gray-700 mb-2 pb-2 border-b border-gray-200">B2. Inter-personal Relations</h3>
            <p class="text-sm text-gray-500 italic mb-4">(if not applicable, select "NA")</p>
            
            <div class="mb-6">
                <label class="block text-gray-700 mb-2">With supervisor</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_supervisor" id="b2_supervisor_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_supervisor", "section": "B2", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_supervisor_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_supervisor" id="b2_supervisor_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_supervisor", "section": "B2", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_supervisor_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_supervisor" id="b2_supervisor_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_supervisor", "section": "B2", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_supervisor_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_supervisor" id="b2_supervisor_2" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_supervisor", "section": "B2", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_supervisor_4">4</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_supervisor" id="b2_supervisor_na" value="NA"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_supervisor", "section": "B2", "value": "NA" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_supervisor_na">NA</label>
                    </div>
                </div>
            </div> 

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">With colleagues</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_colleagues" id="b2_colleagues_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_colleagues", "section": "B2", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_colleagues_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_colleagues" id="b2_colleagues_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_colleagues", "section": "B2", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_colleagues_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_colleagues" id="b2_colleagues_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_colleagues", "section": "B2", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_colleagues_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_colleagues" id="b2_colleagues_4" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_colleagues", "section": "B2", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_colleagues_4">4</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_colleagues" id="b2_colleagues_na" value="NA"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_colleagues", "section": "B2", "value": "NA" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_colleagues_na">NA</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">With subordinates</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="" id="b2_subordinates_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_subordinates", "section": "B2", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_subordinates_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_subordinates" id="b2_subordinates_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_subordinates", "section": "B2", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_subordinates_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_subordinates" id="b2_subordinates_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_subordinates", "section": "B2", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_subordinates_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_subordinates" id="b2_subordinates_4" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_subordinates", "section": "B2", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_subordinates_4">4</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_subordinates" id="b2_subordinates_na" value="NA"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_subordinates", "section": "B2", "value": "NA" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_subordinates_na">NA</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">With students</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="" id="b2_subordinates_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_students", "section": "B2", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_students_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_students" id="b2_students_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_students", "section": "B2", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_students_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_students" id="b2_students_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_students", "section": "B2", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_students_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_students" id="b2_students_4" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_students", "section": "B2", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_students_4">4</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b2_students" id="b2_students_na" value="NA"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b2_students", "section": "B2", "value": "NA" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_students_na">NA</label>
                    </div>
                </div>
            </div>
        </div>

            
        <!-- B3.-->
        <div class="mb-8 bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-100">
            <h3 class="text-xl font-semibold text-gray-700 mb-2 pb-2 border-b border-gray-200">B3. Contributions to Community Service</h3>
            <div class="mb-6">
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b3_community" id="b3_community_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b3_community", "section": "B3", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b3_community_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b3_community" id="b3_community_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b3_community", "section": "B3", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b2_students_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b3_community" id="b3_community_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b3_community", "section": "B3", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b3_community_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b3_community" id="b3_community_4" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b3_community", "section": "B3", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b3_community_4">4</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- B4. Understanding, appreciation and respect for Brunei -->
        <div class="mb-8 bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-100">
            <h3 class="text-xl font-semibold text-gray-700 mb-2 pb-2 border-b border-gray-200">B4. Understanding, appreciation and respect for Brunei</h3>
            <div class="mb-6">
                <label class="block text-gray-700 mb-2">a. culture particularly with the practise of Islam as a way of life</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_culture" id="b4_culture_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_culture", "section": "B4", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_culture_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_culture" id="b4_culture_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_culture", "section": "B4", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_culture_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_culture" id="b4_culture_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_culture", "section": "B4", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_culture_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_culture" id="b4_culture_2" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_culture", "section": "B4", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_culture_4">4</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">b. religious values, particularly Islam as the official religion</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_religious" id="b4_religious_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_religious", "section": "B4", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_religious_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_religious" id="b4_religious_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_religious", "section": "B4", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_religious_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_religious" id="b4_religious_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_religious", "section": "B4", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_religious3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b4_religious" id="b4_religious_2" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b4_religious", "section": "B4", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_attitude_4">4</label>
                    </div>
                </div>
            </div> 
        </div>
        

        <!-- B5. Appraisal of teaching duties -->
        <div class="mb-8 bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-100">
            <h3 class="text-xl font-semibold text-gray-700 mb-2 pb-2 border-b border-gray-200">B5. Appraisal of teaching duties</h3>
            <div class="mb-6">
                <label class="block text-gray-700 mb-2">Preparation of teaching material</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_preparation" id="b5_preparation_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_preparation", "section": "B5", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_preparation_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_preparation" id="b5_preparation_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_preparation", "section": "B5", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_preparation_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_preparation" id="b5_preparation_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_preparation", "section": "B", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b4_preparation_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_preparation" id="b5_preparation_2" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_preparation", "section": "B5", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_preparation_4">4</label>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 mb-2">Attitude to teaching</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_attitude" id="b5_attitude_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_attitude", "section": "B5", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_attitude_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_attitude" id="b5_attitude_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_attitude", "section": "B5", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_attitude_2">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_attitude" id="b5_attitude_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_attitude", "section": "B5", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_attitude_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b5_attitude" id="b5_attitude_2" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b5_attitude", "section": "B5", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b5_attitude_4">4</label>
                    </div>
                </div>
            </div> 
        </div>

        <!-- B6. Appraisal of output and quality of  -->
        <div class="mb-8 bg-gray-50 rounded-lg shadow-sm p-5 border border-gray-100">
            <h3 class="text-xl font-semibold text-gray-700 mb-2 pb-2 border-b border-gray-200">B6. Appraisal of output and quality of</h3>
            <div class="mb-6">
                <label class="block text-gray-700 mb-2">a. Research</label>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b6_research" id="b6_research_1" value="1"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b6_research", "section": "B6", "value": "1" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b6_research_1">1</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b6_research" id="b6_research_2" value="2"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b6_research", "section": "B6", "value": "2" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b6_research_1">2</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b6_research" id="b6_research_3" value="3"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b6_research", "section": "B6", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b6_research", "section": "B6", "value": "3" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b6_research_3">3</label>
                    </div>
                    <div class="flex items-center">
                        <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full" 
                            type="radio" name="b6_research" id="b6_research_4" value="4"
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b6_research", "section": "B6", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-post="{% url 'appraisals:save_rating' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b6_research", "section": "B6", "value": "4" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-indicator="#save-indicator">
                        <label class="ml-1 text-gray-700" for="b6_research_4">4</label>
                    </div>
                </div>
            </div>

        </div>


    <!-- Example for text fields -->
    <div class="mb-8">
        <div class="mb-6">
            <label for="b7_strongest_points" class="block text-xl font-semibold text-gray-700 mb-2">
                B7. Give your opinion of the appraisee's strongest points
            </label>
            <textarea class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                      id="b7_strongest_points" name="b7_strongest_points" rows="4" required
                      hx-post="{% url 'appraisals:save_text_field' %}"
                      hx-trigger="blur"
                      hx-vals='{"field": "b7_strongest_points", "section": "B7" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                      hx-swap="none"
                      hx-indicator="#save-indicator"></textarea>
        </div>

        <div class="mb-6">
            <label for="b8_improvement_areas" class="block text-xl font-semibold text-gray-700 mb-2">
                B8. Describe areas needing attention or improvement by appraisee
            </label>
            <textarea class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                      id="b8_improvement_areas" name="b8_improvement_areas" rows="4" required
                      hx-post="{% url 'appraisals:save_text_field' %}"
                      hx-trigger="blur"
                      hx-vals='{"field": "b8_improvement_areas", "section": "B8" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                      hx-swap="none"
                      hx-indicator="#save-indicator"></textarea>
        </div>

        <div class="mb-6">
            <label for="b9_other_comments" class="block text-xl font-semibold text-gray-700 mb-2">
                B9. Other comments, if any
            </label>
            <textarea class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                      id="b9_other_comments" name="b9_other_comments" rows="4"
                      hx-post="{% url 'appraisals:save_text_field' %}"
                      hx-trigger="blur"
                      hx-vals='{"field": "b9_other_comments", "section": "B9" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                      hx-swap="none"
                      hx-indicator="#save-indicator"></textarea>
        </div>
    </div>

    <!-- B10. Leadership section with conditional display -->
    <div class="mb-8" id="leadershipSection">
        <h3 class="text-xl font-semibold text-gray-700 mb-4">
            B10. Complete the following if the appraisee is a Dean or Deputy Dean or Head Of FICO
        </h3>
        
        <!-- Toggle for leadership section visibility -->
        <div class="mb-6">
            <div class="flex items-center">
                <input class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" 
                        type="checkbox" id="is_leadership_role" name="is_leadership_role"
                        hx-get="{% url 'appraisals:toggle_leadership_section' %}?appraisal_id={{ appraisal.appraisal_id }}"
                        hx-target="#leadership-ratings"
                        hx-trigger="change"
                        hx-indicator="#leadership-indicator"> 
                     Appraisee is in a leadership role (Dean/Deputy Dean/Head of FICO)
                </label>
                <div id="leadership-indicator" class="htmx-indicator ml-2">
                    <svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </div>
            </div>
        </div>
        
        <div id="leadership-ratings" class="hidden">
            <!-- Leadership ratings would appear here -->
        </div>
    </div>

    <!-- B11. Relationship to the appraisee with dynamic behavior -->
    <div class="mb-8">
        <h3 class="text-xl font-semibold text-gray-700 mb-4">B11. Relationship to the appraisee</h3>
        
        <div class="mb-6">
            <label class="block text-gray-700 mb-2">a. I have known the appraisee for:</label>
            <div class="flex gap-4">
                <div class="w-32">
                    <input type="number" class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                           id="b11_known_years" name="b11_known_years" 
                           placeholder="Years" min="0" required
                           hx-post="{% url 'appraisals:save_field' %}"
                           hx-trigger="blur"
                           hx-vals='{"field": "b11_known_years", "section": "B11" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                           hx-swap="none"
                           hx-indicator="#save-indicator">
                </div>
                <div class="w-32">
                    <input type="number" class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                           id="b11_known_months" name="b11_known_months" 
                           placeholder="Months" min="0" max="11" required
                           hx-post="{% url 'appraisals:save_field' %}"
                           hx-trigger="blur"
                           hx-vals='{"field": "b11_known_months", "section": "B11" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                           hx-swap="none"
                           hx-indicator="#save-indicator">
                </div>
            </div>
        </div>

        <div class="mb-6">
            <label class="block text-gray-700 mb-2">b. Relationship to appraisee:</label>
            <div class="flex flex-col md:flex-row gap-4">
                <div class="w-full md:w-1/3">
                    <select class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                            id="b11_relationship" name="b11_relationship" required
                            hx-post="{% url 'appraisals:save_field' %}"
                            hx-trigger="change"
                            hx-vals='{"field": "b11_relationship", "section": "B11" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                            hx-swap="none"
                            hx-get="{% url 'appraisals:toggle_other_relationship' %}"
                            hx-target="#relationshipOtherDiv"
                            hx-indicator="#save-indicator">
                        <option value="">Select relationship</option>
                        <option value="Supervisor">Supervisor</option>
                        <option value="Colleague">Colleague</option>
                        <option value="Subordinate">Subordinate</option>
                        <option value="Other">Other (please specify)</option>
                    </select>
                </div>
                <div class="w-full md:w-2/3 hidden" id="relationshipOtherDiv">
                    <input type="text" class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                           id="b11_relationship_other" name="b11_relationship_other" 
                           placeholder="Please specify relationship"
                           hx-post="{% url 'appraisals:save_field' %}"
                           hx-trigger="blur"
                           hx-vals='{"field": "b11_relationship_other", "section": "B11" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                           hx-swap="none"
                           hx-indicator="#save-indicator">
                </div>
            </div>
        </div>
    </div>

    <!-- Appraiser Review Date with auto-save -->
    <div class="mb-8">
        <div class="mb-6">
            <label for="appraiser_review_date" class="block text-xl font-semibold text-gray-700 mb-2">Date of Appraisal Review</label>
            <input type="date" class="px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                   id="appraiser_review_date" name="appraiser_review_date" required
                   hx-post="{% url 'appraisals:save_field' %}"
                   hx-trigger="change"
                   hx-vals='{"field": "appraiser_review_date", "section": "review" ,"appraisal_id": "{{ appraisal.appraisal_id }}"}'
                   hx-swap="none"
                   hx-indicator="#save-indicator">
        </div>
    </div>

    <!-- Save indicator -->
    <div id="save-indicator" class="htmx-indicator fixed bottom-4 right-4 p-3 bg-white rounded-lg shadow-lg z-50">
        <div class="flex items-center">
            <svg class="animate-spin h-5 w-5 text-blue-500 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-700">Saving...</span>
        </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="flex justify-between items-center mt-8 pt-4 border-t border-gray-200">
        <button type="button" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 transition-colors"
                id="prev-button"
                hx-get="{% url 'appraisals:appraisal_wizard_section_a' appraisal_id=appraisal.appraisal_id %}"
                hx-target="#wizard-container"
                hx-swap="innerHTML"
                hx-push-url="true"
                hx-indicator="#nav-indicator">
            <span class="flex items-center">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                Previous
            </span>
        </button>
        
        <div id="nav-indicator" class="htmx-indicator">
            <svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        </div>
        
        <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                id="next-button"
                hx-get="{% url 'appraisals:appraisal_wizard_section_c' appraisal_id=appraisal.appraisal_id %}"
                hx-target="#wizard-container"
                hx-swap="innerHTML"
                hx-push-url="true"
                hx-indicator="#nav-indicator">
            <span class="flex items-center">
                Next
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </span>
        </button>
    </div>
</div>
{% endblock %}
