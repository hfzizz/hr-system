<!-- Debug information -->
<div class="text-xs text-gray-500 mb-2">
    Debug: Publication Type = {{ pub_type }}
</div>

<div class="space-y-4">
    {% if pub_type %}  <!-- Check if pub_type exists -->
        <!-- Common fields for all types -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Title</label>
            <input type="text" 
                   name="title"
                   value="{{ form.title.value|default:'' }}"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        </div>
        
        <div>
            <label class="block text-sm font-medium text-gray-700">Author</label>
            <input type="text" 
                   name="author"
                   value="{{ form.author.value|default:'' }}"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Year</label>
            <input type="number" 
                   name="year"
                   value="{{ form.year.value|default:'' }}"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        </div>

        {% if pub_type == "book" %}
            <div>
                <label class="block text-sm font-medium text-gray-700">Publisher</label>
                <input type="text" 
                       name="additional_fields.publisher"
                       value="{{ form.additional_fields.publisher|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>

        {% elif pub_type == "article" %}
            <div>
                <label class="block text-sm font-medium text-gray-700">Journal</label>
                <input type="text" 
                       name="additional_fields.journal"
                       value="{{ form.additional_fields.journal|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Volume</label>
                <input type="text" 
                       name="additional_fields.volume"
                       value="{{ form.additional_fields.volume|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Number</label>
                <input type="text" 
                       name="additional_fields.number"
                       value="{{ form.additional_fields.number|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Pages</label>
                <input type="text" 
                       name="additional_fields.pages"
                       value="{{ form.additional_fields.pages|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>

        {% elif pub_type == "inproceedings" %}
            <div>
                <label class="block text-sm font-medium text-gray-700">Series</label>
                <input type="text" 
                       name="additional_fields.series"
                       value="{{ form.additional_fields.series|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Pages</label>
                <input type="text" 
                       name="additional_fields.pages"
                       value="{{ form.additional_fields.pages|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Publisher</label>
                <input type="text" 
                       name="additional_fields.publisher"
                       value="{{ form.additional_fields.publisher|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Address</label>
                <input type="text" 
                       name="additional_fields.address"
                       value="{{ form.additional_fields.address|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>

        {% elif pub_type == "phdthesis" or pub_type == "mastersthesis" %}
            <div>
                <label class="block text-sm font-medium text-gray-700">School</label>
                <input type="text" 
                       name="additional_fields.school"
                       value="{{ form.additional_fields.school|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Address</label>
                <input type="text" 
                       name="additional_fields.address"
                       value="{{ form.additional_fields.address|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Month</label>
                <input type="text" 
                       name="additional_fields.month"
                       value="{{ form.additional_fields.month|default:'' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            </div>

        {% elif pub_type == "unpublished" %}
            <div>
                <label class="block text-sm font-medium text-gray-700">Note</label>
                <textarea name="additional_fields.note"
                          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                          rows="3">{{ form.additional_fields.note|default:'' }}</textarea>
            </div>
        {% endif %}
    {% else %}
        <div class="text-sm text-gray-500">Please select a publication type</div>
    {% endif %}
</div>