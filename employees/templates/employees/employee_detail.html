{% extends "base.html" %}
{% load static %}
{% load employee_tags %}

{% block title %}{{ employee.get_full_name }} - HR System{% endblock %}

{% block styles %}
{{ block.super }}
<style>
  .section-card {
    transition: all 0.2s ease;
  }
  
  .section-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }
  
  .section-title {
    position: relative;
    padding-left: 1rem;
  }
  
  .section-title::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background-color: #4f46e5;
    border-radius: 2px;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }
  
  .info-item {
    padding: 0.75rem;
    border-radius: 0.5rem;
    transition: background-color 0.2s;
  }
  
  .info-item:hover {
    background-color: #f9fafb;
  }
  
  .profile-header {
    background: linear-gradient(to right, #f8fafc, #e0e7ff);
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  .avatar {
    background-color: #4f46e5;
    color: white;
    width: 6rem;
    height: 6rem;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
  }
</style>
{% endblock %}

{% block breadcrumbs %}
<li>
    <div class="flex items-center">
        <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
        </svg>
        <a href="{% url 'employees:employee_list' %}" class="ml-4 text-lg font-medium text-gray-500 hover:text-gray-700">Employees</a>
    </div>
</li>
<li>
    <div class="flex items-center">
        <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
        </svg>
        <span class="ml-4 text-lg font-medium text-gray-700">{{ employee.get_full_name }}</span>
    </div>
</li>
{% endblock %}

{% block content %}
<div class="space-y-8">
    <!-- Enhanced Profile Header -->
    <div class="profile-header p-6 shadow-sm animate-fade-in">
        <div class="flex flex-col md:flex-row">
            <div class="flex-shrink-0 mb-4 md:mb-0 md:mr-6">
                <div class="avatar shadow-lg">
                    {{ employee.first_name|first|upper }}{{ employee.last_name|first|upper }}
                </div>
            </div>
            <div class="flex-1">
                <div class="flex justify-between items-start">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">{{ employee.get_full_name }}</h1>
                        <p class="text-lg text-indigo-700 mt-1">{{ employee.post }}</p>
                        <div class="mt-2 flex flex-wrap gap-2">
                            <span class="inline-flex items-center rounded-md bg-indigo-100 px-2.5 py-0.5 text-sm font-medium text-indigo-800">
                                {{ employee.department }}
                            </span>
                            <span class="inline-flex items-center rounded-md bg-blue-100 px-2.5 py-0.5 text-sm font-medium text-blue-800">
                                ID: {{ employee.employee_id }}
                            </span>
                            <span class="inline-flex items-center rounded-md bg-green-100 px-2.5 py-0.5 text-sm font-medium text-green-800">
                                {{ employee.employee_status }}
                            </span>
                        </div>
                    </div>
                    <div class="flex space-x-4">
                        <a href="{% url 'employees:employee_edit' employee.pk %}" 
                           class="rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                            </svg>
                            Edit Employee
                        </a>
                        <a href="{% url 'employees:employee_list' %}" 
                           class="rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm border border-gray-300 hover:bg-gray-50 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                            Back to List
                        </a>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <div class="flex items-center">
                        <div class="bg-indigo-100 p-2 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-xs text-gray-500">Email</p>
                            <p class="text-sm font-medium">{{ employee.email }}</p>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <div class="bg-indigo-100 p-2 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-xs text-gray-500">Phone</p>
                            <p class="text-sm font-medium">{{ employee.phone_number|default:"Not provided" }}</p>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <div class="bg-indigo-100 p-2 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-xs text-gray-500">Hire Date</p>
                            <p class="text-sm font-medium">{{ employee.hire_date|date:"d M Y" }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Tabs -->
    <div class="bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg overflow-hidden">
        <div class="flex border-b border-gray-200">
            <button class="tab-button px-4 py-4 text-sm font-medium text-indigo-600 border-b-2 border-indigo-600" data-tab="personal">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                Personal Information
            </button>
            <button class="tab-button px-4 py-4 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="employment">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                Employment
            </button>
            <button class="tab-button px-4 py-4 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="qualifications">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path d="M12 14l9-5-9-5-9 5 9 5z" />
                    <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
                </svg>
                Qualifications
            </button>
            <button class="tab-button px-4 py-4 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="documents">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                Documents
            </button>
        </div>

        <!-- Tab Content -->
        <div class="p-6">
            <!-- Personal Information Tab -->
            <div id="personal-tab" class="tab-content space-y-6 animate-fade-in">
                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                    <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                        <div class="px-6 py-5">
                            <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Personal Details</h3>
                            <div class="space-y-4">
                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Full Name</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900 font-medium">{{ employee.first_name }} {{ employee.last_name }}</p>
                                    </div>
                                </div>
                                
                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Username</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900">{{ employee.username }}</p>
                                    </div>
                                </div>
                                
                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Date of Birth</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900">{{ employee.date_of_birth|date:"d M Y" }}</p>
                                    </div>
                                </div>
                                
                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Gender</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900">{{ employee.get_gender_display }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                        <div class="px-6 py-5">
                            <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Contact Information</h3>
                            <div class="space-y-4">
                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Email</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900">{{ employee.email }}</p>
                                    </div>
                                </div>
                                
                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Phone</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900">{{ employee.phone_number|default:"Not provided" }}</p>
                                    </div>
                                </div>

                                <div class="info-item flex items-center">
                                    <div class="w-1/3">
                                        <p class="text-sm font-medium text-gray-500">Address</p>
                                    </div>
                                    <div class="w-2/3">
                                        <p class="text-sm text-gray-900">{{ employee.address|default:"Not provided" }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden sm:col-span-2">
                        <div class="px-6 py-5">
                            <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Identification</h3>
                            <div class="space-y-4">
                                <div class="info-item flex items-center">
                                    <div class="w-1/6">
                                        <p class="text-sm font-medium text-gray-500">IC Number</p>
                                    </div>
                                    <div class="w-2/6">
                                        <p class="text-sm text-gray-900 font-medium">{{ employee.ic_no }}</p>
                                    </div>
                                    <div class="w-1/6">
                                        <p class="text-sm font-medium text-gray-500">IC Colour</p>
                                    </div>
                                    <div class="w-2/6">
                                        <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                                            {% if employee.ic_colour == 'Yellow' %}
                                                bg-yellow-100 text-yellow-800
                                            {% elif employee.ic_colour == 'Red' %}
                                                bg-red-100 text-red-800
                                            {% elif employee.ic_colour == 'Green' %}
                                                bg-green-100 text-green-800
                                            {% elif employee.ic_colour == 'Purple' %}
                                                bg-purple-100 text-purple-800
                                            {% else %}
                                                bg-gray-100 text-gray-800
                                            {% endif %}">
                                            {{ employee.ic_colour }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Employment Information Tab -->
            <div id="employment-tab" class="tab-content hidden space-y-6 animate-fade-in">
                <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="px-6 py-5">
                        <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Position Information</h3>
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Department</p>
                                <p class="mt-1 text-sm text-gray-900 font-medium">{{ employee.department }}</p>
                            </div>
                            
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Position</p>
                                <p class="mt-1 text-sm text-gray-900 font-medium">{{ employee.post }}</p>
                            </div>
                            
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Employee Status</p>
                                <p class="mt-1 text-sm text-gray-900">{{ employee.employee_status }}</p>
                            </div>
                            
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Type of Appointment</p>
                                <p class="mt-1 text-sm text-gray-900">{{ employee.appointment_type }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="px-6 py-5">
                        <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Employment Details</h3>
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Hire Date</p>
                                <p class="mt-1 text-sm text-gray-900">{{ employee.hire_date|date:"d M Y" }}</p>
                            </div>
                            
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Employee ID</p>
                                <p class="mt-1 text-sm text-gray-900 font-medium">{{ employee.employee_id }}</p>
                            </div>
                            
                            <div class="info-item">
                                <p class="text-sm font-medium text-gray-500">Salary</p>
                                <p class="mt-1 text-sm text-gray-900">${{ employee.salary|floatformat:2 }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="px-6 py-5">
                        <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Roles</h3>
                        <div class="flex flex-wrap gap-2">
                            {% for role in employee.roles.all %}
                                <span class="inline-flex items-center rounded-md bg-indigo-100 px-2.5 py-1 text-sm font-medium text-indigo-800">
                                    {{ role.name }}
                                </span>
                            {% empty %}
                                <p class="text-sm text-gray-500">No roles assigned.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Qualifications Tab -->
            <div id="qualifications-tab" class="tab-content hidden space-y-6 animate-fade-in">
                <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="px-6 py-5">
                        <h3 class="text-base font-semibold leading-6 text-gray-900 section-title mb-4">Academic Qualifications</h3>
                        {% if employee.employee_qualifications.exists %}
                            <div class="mt-4 overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-300">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 rounded-tl-lg">Degree/Diploma</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">University/College</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">From</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 rounded-tr-lg">To</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200 bg-white">
                                        {% for qualification in employee.employee_qualifications.all %}
                                            {% if not qualification.DELETE %}
                                            <tr class="hover:bg-gray-50 transition-colors duration-150">
                                                <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900">{{ qualification.degree_diploma }}</td>
                                                <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-900">{{ qualification.university_college }}</td>
                                                <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700">{{ qualification.from_date|date:"M Y" }}</td>
                                                <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-700">{{ qualification.to_date|date:"M Y" }}</td>
                                            </tr>
                                            {% endif %}
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <div class="rounded-md bg-gray-50 p-4 mt-4">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm text-gray-500">No qualifications recorded.</p>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Documents Tab -->
            <div id="documents-tab" class="tab-content hidden space-y-6 animate-fade-in">
                <div class="section-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="px-6 py-5">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-base font-semibold leading-6 text-gray-900 section-title">Documents</h3>
                            <span class="inline-flex items-center rounded-md bg-indigo-100 px-2.5 py-0.5 text-sm font-medium text-indigo-800">
                                {{ employee.documents.count }} Documents
                            </span>
                        </div>
                        
                        {% if employee.documents.exists %}
                            <div class="grid grid-cols-1 gap-6 mt-4">
                                {% for document in employee.documents.all %}
                                <div class="flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-150">
                                    <div class="flex-shrink-0 mr-4">
                                        <div class="bg-indigo-100 p-3 rounded-md">
                                            {% if document.file.name|lower|slice:"-3:" == 'pdf' %}
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                                </svg>
                                            {% elif document.file.name|lower|slice:"-3:" in 'jpg,png,gif,bmp,svg' %}
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                </svg>
                                            {% else %}
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                </svg>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="flex-grow">
                                        <h4 class="text-sm font-medium text-gray-900">{{ document.title }}</h4>
                                        <div class="flex items-center mt-1 text-xs text-gray-500">
                                            <span>{{ document.original_filename }}</span>
                                            <span class="mx-2">•</span>
                                            <span>{{ document.uploaded_at|date:"d M Y H:i" }}</span>
                                        </div>
                                    </div>
                                    <div class="flex-shrink-0 ml-4">
                                        {% if document.file %}
                                            <a href="{{ document.file.url }}" 
                                               target="_blank"
                                               class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 transition-colors duration-200">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                                </svg>
                                                Download
                                            </a>
                                        {% else %}
                                            <span class="inline-flex items-center rounded-md bg-red-50 px-3 py-2 text-sm font-semibold text-red-600">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                File not found
                                            </span>
                                        {% endif %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="rounded-md bg-gray-50 p-4 mt-4">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm text-gray-500">No documents uploaded.</p>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% block javascript %}
<script src="{% static 'employees/js/document_preview.js' %}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Tab functionality
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Reset all buttons and hide all contents
                tabButtons.forEach(btn => {
                    btn.classList.remove('text-indigo-600', 'border-indigo-600');
                    btn.classList.add('text-gray-500', 'hover:text-gray-700');
                });
                
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Activate clicked button and show corresponding content
                button.classList.remove('text-gray-500', 'hover:text-gray-700');
                button.classList.add('text-indigo-600', 'border-indigo-600');
                
                const tabId = button.getAttribute('data-tab');
                document.getElementById(`${tabId}-tab`).classList.remove('hidden');
            });
        });
        
        // Add animation to sections with delay
        const sections = document.querySelectorAll('.animate-fade-in');
        sections.forEach((section, index) => {
            section.style.animationDelay = `${0.1 + (index * 0.1)}s`;
        });
    });
</script>
{% endblock %}

{% endblock %}